(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{104:function(t,e,n){},105:function(t,e,n){"use strict";n.r(e);var r=n(2),c=n(0),a=n(26),s=n.n(a),u=n(13),o=n(64),i=n(20),b=n(48),j=n(34),l=n(50),O=n(49),d=n(24),h=n(7),f=n(123),p=n(15),g=n(65),v=n.n(g),x=n(66),m=n.n(x),y=Object(u.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(r.jsxs)("nav",{children:[Object(r.jsxs)(d.b,{to:"/",exact:!0,className:"nav",activeClassName:"active-nav",children:[Object(r.jsx)(v.a,{})," ",Object(r.jsx)("span",{children:"Home"})]}),e&&Object(r.jsxs)(d.b,{to:"/contacts",className:"nav",activeClassName:"active-nav",children:[Object(r.jsx)(m.a,{})," ",Object(r.jsx)("span",{children:"Contacts"})]})]})})),k=n(122),C={marginRight:"10px"},S=Object(u.b)((function(t){return{name:p.b.getUserName(t),avatar:"https://cdn.pixabay.com/photo/2014/04/02/14/10/female-306407_960_720.png"}}),{onLogout:p.a.logOut})((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("img",{style:C,src:e,alt:"",width:"32"}),Object(r.jsxs)("span",{style:C,children:[" Welcome, in phonebook ",n]}),Object(r.jsx)(k.a,{variant:"contained",size:"small",color:"secondary",onClick:c,children:"Logout"})]})})),E=n(67),R=n.n(E),A=n(68),U=n.n(A),q=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(d.b,{to:"/register",className:"nav",activeClassName:"active-nav",children:[Object(r.jsx)(R.a,{}),Object(r.jsx)("span",{children:" Register"})]}),Object(r.jsxs)(d.b,{to:"/login",className:"nav",activeClassName:"active-nav",children:[Object(r.jsx)(U.a,{}),Object(r.jsx)("span",{children:"Login"})]})]})},w={container:{display:"flex",alignItems:"center"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"}},N=Object(u.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(r.jsxs)("header",{style:w.header,children:[Object(r.jsx)(y,{}),Object(r.jsx)("div",{style:w.container,children:e?Object(r.jsx)(S,{}):Object(r.jsx)(q,{})})]})}));var z,L=function(t){var e=t.children;return Object(r.jsxs)("section",{children:[Object(r.jsx)(N,{}),Object(r.jsx)("hr",{}),e]})},I=n(4),B=Object(u.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=Object(I.a)(t,["component","isAuthenticated"]);return Object(r.jsx)(h.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return n&&c.restricted?Object(r.jsx)(h.a,{to:"/contacts"}):Object(r.jsx)(e,Object(i.a)({},t))}}))})),F=Object(u.b)((function(t){return{isAuthenticated:p.b.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=Object(I.a)(t,["component","isAuthenticated"]);return Object(r.jsx)(h.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return n?Object(r.jsx)(e,Object(i.a)({},t)):Object(r.jsx)(h.a,{to:"/login"})}}))})),G=[{path:"/",label:"Home",exact:!0,component:Object(c.lazy)((function(){return n.e(5).then(n.bind(null,134))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(c.lazy)((function(){return n.e(7).then(n.bind(null,135))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(c.lazy)((function(){return n.e(6).then(n.bind(null,136))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,140))})),private:!0,restricted:!1}],H=function(t){Object(l.a)(n,t);var e=Object(O.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(r.jsx)(d.a,{children:Object(r.jsx)(L,{children:Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)("h1",{children:Object(r.jsx)(f.a,{})}),children:Object(r.jsx)(h.d,{children:G.map((function(t){return t.private?Object(r.jsx)(F,Object(i.a)({},t),t.label):Object(r.jsx)(B,Object(i.a)({},t),t.label)}))})})})})}}]),n}(c.Component),J=Object(u.b)(null,{onGetCurrentUser:p.a.getCurrentUser})(H),_=n(3),D=n(33),M=n(69),P=n.n(M),W=n(6),K=n(27),Q=n(9),T=n(36),V=Object(_.c)([],(z={},Object(W.a)(z,T.g,(function(t,e){return e.payload})),Object(W.a)(z,T.c,(function(t,e){var n=e.payload;return[].concat(Object(K.a)(t),[n])})),Object(W.a)(z,T.j,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),z)),X=Object(_.c)("",Object(W.a)({},T.d,(function(t,e){return e.payload}))),Y=Object(Q.c)({items:V,filter:X}),Z=n(41),$={key:"auth",storage:P.a,whitelist:["token"]},tt=Object(_.a)({reducer:{contacts:Y,auth:Object(D.e)($,Z.a)},middleware:Object(_.d)({serializableCheck:{ignoredActions:[D.a,D.d,D.b,D.c]}})}),et=Object(D.f)(tt);n(104);s.a.render(Object(r.jsx)(u.a,{store:tt,children:Object(r.jsx)(o.a,{loading:null,persistor:et,children:Object(r.jsx)(J,{})})}),document.getElementById("root"))},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return l}));var r=n(32),c=n.n(r),a=n(42),s=n(28),u=n.n(s),o=n(5);u.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(t){u.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){u.a.defaults.headers.common.Authorization=""},j={register:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.registerRequest()),e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:r=e.sent,a=r.data,n(o.a.registerSuccess(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(o.a.registerError(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(o.a.logoutRequest()),t.prev=1,t.next=4,u.a.post("/users/logout");case 4:n=t.sent,r=n.data,b(),e(o.a.logoutSuccess(r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e(o.a.logoutError(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.loginRequest()),e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:r=e.sent,a=r.data,i(a.token),n(o.a.loginSuccess(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),n(o.a.loginError(e.t0)),alert("Incorrect login");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(i(n),t(o.a.getCurrentUserRequest()),u.a.get("/users/current").then((function(e){var n=e.data;return t(o.a.getCurrentUserSuccess(n))})).catch((function(t){return o.a.getCurrentUserError(t)})))}}},l={isAuthenticated:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name}};n(41)},36:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"i",(function(){return b})),n.d(e,"j",(function(){return j})),n.d(e,"h",(function(){return l})),n.d(e,"d",(function(){return O}));var r=n(3),c=Object(r.b)("contacts/addRequest"),a=Object(r.b)("contacts/addSuccess"),s=Object(r.b)("contacts/addError"),u=Object(r.b)("contacts/fetchRequest"),o=Object(r.b)("contacts/fetchSuccess"),i=Object(r.b)("contacts/fetchError"),b=Object(r.b)("contacts/removeRequest"),j=Object(r.b)("contacts/removeSuccess"),l=Object(r.b)("contacts/removeError"),O=Object(r.b)("phonebook/filter")},41:function(t,e,n){"use strict";var r,c,a,s=n(6),u=n(9),o=n(3),i=n(5),b={name:null,email:null},j=Object(o.c)(b,(r={},Object(s.a)(r,i.a.registerSuccess,(function(t,e){return e.payload.user})),Object(s.a)(r,i.a.loginSuccess,(function(t,e){return e.payload.user})),Object(s.a)(r,i.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(s.a)(r,i.a.logoutSuccess,(function(){return b})),r)),l=Object(o.c)(null,(c={},Object(s.a)(c,i.a.registerSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,i.a.loginSuccess,(function(t,e){return e.payload.token})),Object(s.a)(c,i.a.logoutSuccess,(function(){return null})),c)),O=Object(o.c)(null,(a={},Object(s.a)(a,i.a.registerError,(function(t,e){return e.payload})),Object(s.a)(a,i.a.loginError,(function(t,e){return e.payload})),Object(s.a)(a,i.a.logoutError,(function(t,e){return e.payload})),Object(s.a)(a,i.a.getCurrentUserError,(function(t,e){return e.payload})),a));e.a=Object(u.c)({user:j,token:l,error:O})},5:function(t,e,n){"use strict";var r=n(3),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),s=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),o=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),j=Object(r.b)("auth/logoutSuccess"),l=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),d=Object(r.b)("auth/getCurrentUserSuccess"),h=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:s,logoutRequest:b,logoutSuccess:j,logoutError:l,loginRequest:u,loginSuccess:o,loginError:i,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:h}}},[[105,1,2]]]);
//# sourceMappingURL=main.5a45c8e0.chunk.js.map